Maze Diamond Hunt (WebGL)

Коротко
- 3D‑лабиринт на Three.js: собирайте алмазы, переходите на следующий уровень, загоняйте мышей в тупики.
- Режимы: Classic и Biomes (деревья + джамп‑пэды; пэды дают усиленный прыжок и позволяют бегать по верхам стен).
- Есть мобильные элементы управления и 3D‑карта уровня.

Запуск
- Нужен HTTP‑сервер (ESM‑модули):
  - Python: `python3 -m http.server 8000` → открыть `http://localhost:8000/index.html`
  - Node: `npx http-server -p 8000` или `npx serve -l 8000`

Управление
- ПК: клик по окну — захват мыши; WASD — ходьба; Space — прыжок; двойной Space — полёт; Shift — снижение.
- Горячие клавиши:
  - `M` — 3D‑карта (первое включение стоит алмазы)
  - `0` — отладка (FPS/метрики)
  - `Q` — качество (LOW/MED/HIGH)
  - `7` — заспавнить мышь
  - `1` — сохранить; `2` — загрузить; `4` — меню
- Мобильные: левый стик (ходьба), свайп справа (взгляд), кнопки «Прыжок/Снижение», «Карта», «Сохранить», «На весь экран», «Меню».

Масштаб
- Слайдер «Масштаб карты» в главном меню (×1…×50).
- Масштабирует: размер лабиринта (15×N), цель уровня (10×N), количество алмазов (15×N), стоимость карты (20×N) и прыжков (10×N), число пэдов (~2×N).

Сохранения (устойчивые)
- Код = JSON → UTF‑8 → Base32 (A–Z2–7), дефисы опциональны (игнорируются при загрузке).
- Сохраняется: масштаб, режим, сиды, мировая позиция/углы/полёт, прогресс (total/levels/map/jump/carry), список индексов собранных алмазов, позиции мышей (координаты клеток).
- Загрузка: сначала применяется масштаб → генерируется лабиринт/объекты → восстанавливаются алмазы/игрок/мыши/перки.
- Если код “не принимается”, проверьте, что он содержит только символы A–Z, 2–7 и `-`.

Мыши
- Спавнятся по `7` и с 5% шансом при старте биом‑уровня.
- Убегают от игрока, могут «красть» алмазы. При поимке игрок получает 50 + «награду» мыши.
- После прыжка с пэда могут бегать по верхам стен.

Производительность
- FPS привязан к частоте экрана (requestAnimationFrame). Внутренний шаг клемпится (dt ≤ 0.1) для стабильности при фризах.

Ассеты и зависимости
- Three.js и лоадеры подключены локально (`vendor/three`).
- Модель мыши: используется `assets/models/rat.obj` + `rat.jpg` через `OBJLoader`.

Известные мелочи
- При очень больших масштабах (30–50×) рекомендуем понизить качество (`Q`) для стабильного FPS.
